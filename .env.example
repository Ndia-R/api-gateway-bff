# ============================================
# Hostname
# ============================================
# VPSのホスト名（開発環境・本番環境共通）
# 開発環境: localhost
# 本番環境: vsv-emerald.skygroup.local
#
# この値を変更すると、以下のURLが自動的に更新されます:
# - IDP_REDIRECT_URI
# - IDP_POST_LOGOUT_REDIRECT_URI
# - FRONTEND_URL
# - CORS_ALLOWED_ORIGINS（デフォルト値）
VPS_HOSTNAME=localhost

# 📝 以下のBFF関連URLはdocker-compose.ymlで ${VPS_HOSTNAME} から自動生成されます:
#    - IDP_REDIRECT_URI: https://${VPS_HOSTNAME}/bff/login/oauth2/code/idp
#    - IDP_POST_LOGOUT_REDIRECT_URI: https://${VPS_HOSTNAME}/logout-complete
#    - FRONTEND_URL: https://${VPS_HOSTNAME}
#
# 注1: すべての環境でhttpsを使用するため、スキームは固定されています
# 注2: IDP_POST_LOGOUT_REDIRECT_URIは、現在の実装ではBFFがバックエンドから
#      WebClientでIDプロバイダーにログアウトリクエストを送信するため、
#      ブラウザには届きません。OIDC仕様準拠のためパラメータとして送信されます。

# ============================================
# CORS Configuration (Multiple Origins Support)
# ============================================
# 許可するオリジンのリスト（カンマ区切り）
# BFFは、Refererヘッダーから動的にリダイレクト先を決定しますが、
# セキュリティ検証のためCORS_ALLOWED_ORIGINSで許可リストを管理します。
#
# 【同一VPS + Nginx構成】開発環境・本番環境（デフォルト）:
CORS_ALLOWED_ORIGINS=https://${VPS_HOSTNAME}
#
# 【異なるVPS構成】複数の独立したドメインを持つ場合（例）:
# CORS_ALLOWED_ORIGINS=https://books.example.com,https://music.example.com
#
# 注: ワイルドカード対応（例: https://*.example.com）
#     Spring SecurityのCORS設定でワイルドカードを使用できます

# ============================================
# Identity Provider (IdP) Configuration
# ============================================
IDP_CLIENT_ID=my-books-client
IDP_CLIENT_SECRET=your-client-secret
IDP_ISSUER_URI=https://vsv-crystal.skygroup.local/auth/realms/test-realm

# ============================================
# Application Configuration
#
# リソースサーバー設定（5つまで拡張）
# SERVICE_xx_URL=【docker composeネットワーク内のサービス名】
# SERVICE_xx_PATH_PREFIX=【各サービスのパスプレフィックス】
# ============================================
SERVICE_01_URL=http://my-books-api:8080
SERVICE_01_PATH_PREFIX=/my-books

# SERVICE_02_URL=http://service-02-api:8080
# SERVICE_02_PATH_PREFIX=/service-02

# SERVICE_03_URL=http://service-03-api:8080
# SERVICE_03_PATH_PREFIX=/service-03

# SERVICE_04_URL=http://service-04-api:8080
# SERVICE_04_PATH_PREFIX=/service-04

# SERVICE_05_URL=http://service-05-api:8080
# SERVICE_05_PATH_PREFIX=/service-05

# ============================================
# Logging Configuration
# 本番環境: INFO
# 開発環境: DEBUG or WARN
# ============================================
LOG_LEVEL=INFO